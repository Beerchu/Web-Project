@{
    ViewBag.Title = "Contact Us";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="movie-listings-panel">

    <!-- HERO -->
    <section class="about-hero">
        <div class="about-hero__text">
            <h1>Contact Us</h1>
            <p>Get in touch with our 5-star support team</p>
            <a class="about-btn" href="#contact-form">Send us a Message</a>
        </div>
        <div class="about-hero__badge">
            <img src="@Url.Content("~/images/logo.png")" alt="Five Stars Logo" />
        </div>
    </section>

    <main>
        <!-- CONTACT FORM -->
        <section class="contact-form" id="contact-form">
            <form id="contactForm">
                <div class="form-group">
                    <label for="name">Full Name:</label>
                    <input type="text" id="name" name="name"
                           required
                           placeholder="Your first and last name" />
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email"
                           required
                           placeholder="Your email address" />
                </div>

                <div class="form-group">
                    <label for="subject">Subject:</label>
                    <select id="subject" name="subject" required>
                        <option value="">Select a subject</option>
                        <option value="booking">Booking Issue</option>
                        <option value="technical">Technical Support</option>
                        <option value="feedback">Feedback</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="message">Message:</label>
                    <textarea id="message" name="message"
                              rows="5"
                              required
                              placeholder="Write your message here"></textarea>
                </div>

                <button type="submit">Send Message</button>
            </form>
        </section>

        <!-- CONTACT INFO -->
        <section class="contact-info">
            <h2>Other Ways to Reach Us</h2>

            <div class="info-item">
                <h3><i class="fas fa-map-marker-alt"></i> Address</h3>
                <p>
                    E5 Highway Alaköy Campus, Alaköy<br />
                    7-8-9-10. Section, 34158 Bakırköy
                </p>
            </div>

            <div class="info-item">
                <h3><i class="fas fa-phone"></i> Phone</h3>
                <p>+90 (553) 777 06 03</p>
            </div>

            <div class="info-item">
                <h3><i class="fas fa-envelope"></i> Email</h3>
                <p>support@5starcinema.com</p>
            </div>
        </section>
    </main>

    <!-- FOOTER (sayfaya özel) -->
    <footer class="footer">
        <div class="footer-inner">
            <nav class="footer-links">
                <a href="#">Copyright &copy; 2025</a>
                <a href="#">Privacy Policy</a>
            </nav>
            <div class="social-icons">
                <a href="https://www.instagram.com/" aria-label="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://x.com/" aria-label="Twitter">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://www.facebook.com/" aria-label="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
            </div>
        </div>
    </footer>
</div>

<!-- CHAT WIDGET -->
<div class="chat-widget">
    <div class="chat-button" id="chatButton">
        <span>💬 Live Support</span>
    </div>

    <div class="chat-box" id="chatBox">
        <div class="chat-header">
            <h3>Live Support</h3>
            <button class="close-btn" id="closeChat">×</button>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <p>Hello! How can I help you?</p>
                <span class="time">Now</span>
            </div>
        </div>

        <div class="chat-input">
            <input type="text" id="messageInput" placeholder="Type your message..." />
            <button id="sendMessage">Send</button>
        </div>
    </div>
</div>

@section scripts {
    <!-- İstersen sonra ayrı JS dosyasına taşırsın, şimdilik orijinal HTML'deki script burada -->
    <script>
        function toggleDropdown() {
            const dropdown = document.getElementById("userDropdown");
            if (dropdown) {
                dropdown.classList.toggle("show-dropdown");
            }
        }

        window.onclick = function (event) {
            if (!event.target.matches('.menu-button') &&
                !event.target.matches('.menu-button i')) {
                const dropdown = document.getElementById("userDropdown");
                if (dropdown && dropdown.classList.contains('show-dropdown')) {
                    dropdown.classList.remove('show-dropdown');
                }
            }
        };

        document.getElementById('contactForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;

            if (!name || !email || !subject || !message) {
                alert('Please fill in all fields.');
                return;
            }

            alert('Your message has been sent successfully! We will get back to you shortly.');
            document.getElementById('contactForm').reset();
        });

        // Chat widget logic
        const chatButton = document.getElementById('chatButton');
        const chatBox = document.getElementById('chatBox');
        const closeChat = document.getElementById('closeChat');
        const messageInput = document.getElementById('messageInput');
        const sendMessageButton = document.getElementById('sendMessage');
        const chatMessages = document.getElementById('chatMessages');

        chatButton.addEventListener('click', () => {
            chatBox.classList.toggle('open');
        });

        closeChat.addEventListener('click', () => {
            chatBox.classList.remove('open');
        });

        sendMessageButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function sendMessage() {
            const messageText = messageInput.value.trim();
            if (messageText !== '') {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', 'user-message');
                messageElement.innerHTML =
                    `<p>${messageText}</p><span class="time">${
                        new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })
                    }</span>`;

                chatMessages.appendChild(messageElement);
                messageInput.value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;

                setTimeout(() => {
                    const botResponse = document.createElement('div');
                    botResponse.classList.add('message', 'bot-message');
                    botResponse.innerHTML =
                        `<p>Thank you for your message. An agent will be with you shortly.</p><span class="time">${
                            new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })
                        }</span>`;
                    chatMessages.appendChild(botResponse);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
            }
        }
    </script>
}
